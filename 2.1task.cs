using Microsoft.AspNetCore.Mvc;

namespace YourNamespace.Controllers
{
// Указываем, что контроллер является контроллером API
// и маршрут к нему формируется из имени контроллера
    [ApiController]
    [Route("[controller]")]
    public class BmiController : ControllerBase
    {
// Обработчик GET-запроса на маршрут /bmi с параметрами роста и веса
        [HttpGet]
        public IActionResult CalculateBmi(double height, double weight)
        {
// Проверяем входные параметры на адекватность
            if (height <= 0 || weight <= 0)
            {
// Если параметры неадекватны, возвращаем ответ с ошибкой BadRequest
                return BadRequest("Рост и вес должны быть больше нуля");
            }
            // Вычисляем ИМТ по формуле
            double bmi = weight / (height * height);

            // Определяем описание ИМТ на основе вычисленного значения
            string description;
            if (bmi < 18.5)
            {
                description = "Недостаточная масса тела";
            }
            else if (bmi < 25)
            {
                description = "Нормальная масса тела";
            }
            else if (bmi < 30)
            {
                description = "Избыточная масса тела (предожирение)";
            }
            else if (bmi < 35)
            {
                description = "Ожирение I степени";
            }
            else if (bmi < 40)
            {
                description = "Ожирение II степени";
            }
            else
            {
                description = "Ожирение III степени";
            }

            // Возвращаем результаты расчета в формате JSON,
            // используя метод Ok контроллера
            return Ok(new { Bmi = bmi, Description = description });
        }
    }
}
/*Этот код представляет собой определение контроллера веб-API (Web API) для вычисления индекса массы тела (ИМТ).

Контроллер наследуется от базового класса ControllerBase из ASP.NET Core MVC и имеет атрибуты [ApiController] и [Route("[controller]")] для указания, что это контроллер API и маршрут к нему формируется из имени контроллера.

Метод CalculateBmi имеет атрибут HttpGet, что означает, что он обрабатывает GET-запросы на указанный маршрут. Метод принимает два параметра - рост и вес в виде дробных чисел типа double.

Первым делом метод проверяет, что входные параметры адекватны (неотрицательные), и если это не так, возвращает ответ с ошибкой BadRequest.

Затем метод вычисляет ИМТ, используя формулу: вес (в килограммах) деленный на квадрат роста (в метрах).

Далее метод определяет описание ИМТ на основе вычисленного значения и возвращает результаты расчета в виде объекта, содержащего ИМТ и его описание, в формате JSON, используя метод Ok контроллера.

Например, при GET-запросе к /bmi?height=1.8&weight=75 контроллер вернет следующий ответ:

{
"Bmi": 23.15,
"Description": "Нормальная масса тела"
}

Это означает, что у человека с ростом 1.8 м и весом 75 кг нормальный индекс массы тела (23.15).

Запросы из Postman:
https://ibb.co/J2QPFCc
https://ibb.co/gFgyFfD
*/
